
#-------------------------------------------------------------------------------
/** @author Великодный В.В. (Joonte Ltd.) */
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
if(Is_Error(System_Load('classes/DOM.class')))
  return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
$Args = Args();
#-------------------------------------------------------------------------------
$FeatureID = (integer) @$Args['FeatureID'];
#-------------------------------------------------------------------------------
$Feature = DB_Select('Features',Array('Title','Comment'),Array('UNIQ','ID'=>$FeatureID));
#-------------------------------------------------------------------------------
switch(ValueOf($Feature)){
  case 'error':
    return ERROR | @Trigger_Error(500);
  case 'exception':
    return ERROR | @Trigger_Error(400);
  case 'array':
    #---------------------------------------------------------------------------
    $DOM = new DOM();
    #---------------------------------------------------------------------------
    $Links = &Links();
    # Коллекция ссылок
    $Links['DOM'] = &$DOM;
    #---------------------------------------------------------------------------
    if(Is_Error($DOM->Load('Standard')))
      return ERROR | @Trigger_Error(500);
    #---------------------------------------------------------------------------
    $DOM->AddText('Title',$Feature['Title']);
    #---------------------------------------------------------------------------
    $DOM->AddText('Into',$Feature['Comment']);
    #---------------------------------------------------------------------------
    $Out = $DOM->Build();
    #---------------------------------------------------------------------------
    if(Is_Error($Out))
      return ERROR | @Trigger_Error(500);
    #---------------------------------------------------------------------------
    return $Out;
  default:
    return ERROR | @Trigger_Error(101);
}
#-------------------------------------------------------------------------------
