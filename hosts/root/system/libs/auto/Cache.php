<?php
#-------------------------------------------------------------------------------
/** @author Бреславский А.В. (Joonte Ltd.) */
#-------------------------------------------------------------------------------
function Cache_Add($Key,$Value){
  #-----------------------------------------------------------------------------
  if(!IsSet($_ENV['NO_CACHE'])){
    #---------------------------------------------------------------------------
    $Cache = &Link_Get('Cache','array');
    #---------------------------------------------------------------------------
    $Cache[$Key] = $Value;
    #---------------------------------------------------------------------------
    # Debug(SPrintF('[Cache_Add]: сохранение объекта в кеше (%s)',$Key));
  }
  #-----------------------------------------------------------------------------
  return TRUE;
}
#-------------------------------------------------------------------------------
function Cache_Get($Key){
  #-----------------------------------------------------------------------------
  $Cache = &Link_Get('Cache','array');
  #-----------------------------------------------------------------------------
  if(IsSet($Cache[$Key])){
    #---------------------------------------------------------------------------
    # Debug(SPrintF('[Cache_Get]: извлечение объекта в кеша (%s)',$Key));
    #---------------------------------------------------------------------------
    return $Cache[$Key];
  }
  #-----------------------------------------------------------------------------
  return FALSE;
}
#-------------------------------------------------------------------------------
function Cache_IsExists($Key){
  #-----------------------------------------------------------------------------
  $Cache = &Link_Get('Cache','array');
  #-----------------------------------------------------------------------------
  if(IsSet($Cache[$Key]))
    return TRUE;
  #-----------------------------------------------------------------------------
  return FALSE;
}
#-------------------------------------------------------------------------------
function Cache_Delete($Pattern){
  #-----------------------------------------------------------------------------
  $Cache = &Link_Get('Cache','array');
  #-----------------------------------------------------------------------------
  foreach(Array_Keys($Cache) as $Key){
    #---------------------------------------------------------------------------
    if(Preg_Match(SPrintF('/%s/',$Pattern),$Key)){
      #-------------------------------------------------------------------------
      # Debug(SPrintF('[Cache_Delete]: удаление объекта из кеша (%s)',$Key));
      #-------------------------------------------------------------------------
      UnSet($Cache[$Key]);
    }
  }
  #-----------------------------------------------------------------------------
  return TRUE;
}
#-------------------------------------------------------------------------------
?>
