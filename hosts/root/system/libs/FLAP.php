<?php
#-------------------------------------------------------------------------------
/** @author Великодный В.В. (Joonte Ltd.) */
#-------------------------------------------------------------------------------
function FLAP_Create($Chanel,$Data){
  #-----------------------------------------------------------------------------
  static $FlapID = 1;
  /****************************************************************************/
  $__args_types = Array('integer','string');
  #-----------------------------------------------------------------------------
  $__args__ = Func_Get_Args(); Eval(FUNCTION_INIT);
  /****************************************************************************/
  return Chr(0x2A). # Начало пакета
         Bytes_I2B(BUTE,$Chanel). # Канал передачи
         Bytes_I2B(WORD,$FlapID++). # Номер пакета
         Bytes_I2B(WORD,StrLen($Data)). # Длина пакета
         $Data; # Сам пакет
}
#-------------------------------------------------------------------------------
function FLAP_Explode($String){
  /****************************************************************************/
  $__args_types = Array('string');
  #-----------------------------------------------------------------------------
  $__args__ = Func_Get_Args(); Eval(FUNCTION_INIT);
  /****************************************************************************/
  if(StrLen($String) < 6)
    return FALSE;
  #-----------------------------------------------------------------------------
  return Array(
    #---------------------------------------------------------------------------
    'Chanel' => Bytes_Get($String,01), # Канал передачи
    'Number' => Bytes_Get($String,02,02), # Длина пакета
    'Data'   => SubStr($String,06) # Сам пакет
  );
}
#-------------------------------------------------------------------------------
?>