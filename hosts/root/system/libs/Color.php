<?php
#-------------------------------------------------------------------------------
/** @author Великодный В.В. (Joonte Ltd.) */
#-------------------------------------------------------------------------------
function Color_Shift($ColorA,$ColorB,$Shift){
  /****************************************************************************/
  $__args_types = Array('integer');
  #-----------------------------------------------------------------------------
  $__args__ = Func_Get_Args(); Eval(FUNCTION_INIT);
  /****************************************************************************/
  $RGB1 = Color_RGB_Explode($ColorA);
  $RGB2 = Color_RGB_Explode($ColorB);
  #-----------------------------------------------------------------------------
  $R = ($RGB1['R'] == $RGB2['R']?$RGB1['R']:(int)(Abs($RGB2['R'] - $RGB1['R'])*(($RGB2['R'] > $RGB1['R']?$Shift:100-$Shift))/100) + ($RGB2['R'] > $RGB1['R']?$RGB1['R']:$RGB2['R']));
  $G = ($RGB1['G'] == $RGB2['G']?$RGB1['G']:(int)(Abs($RGB2['G'] - $RGB1['G'])*(($RGB2['G'] > $RGB1['G']?$Shift:100-$Shift))/100) + ($RGB2['G'] > $RGB1['G']?$RGB1['G']:$RGB2['G']));
  $B = ($RGB1['B'] == $RGB2['B']?$RGB1['B']:(int)(Abs($RGB2['B'] - $RGB1['B'])*(($RGB2['B'] > $RGB1['B']?$Shift:100-$Shift))/100) + ($RGB2['B'] > $RGB1['B']?$RGB1['B']:$RGB2['B']));
  #-----------------------------------------------------------------------------
  return Color_RGB_Implode($R,$G,$B);
}
#-------------------------------------------------------------------------------
function Color_RGB_Explode($Color){
  /****************************************************************************/
  $__args_types = Array('integer');
  #-----------------------------------------------------------------------------
  $__args__ = Func_Get_Args(); Eval(FUNCTION_INIT);
  /****************************************************************************/
  $R = ($Color & 0xFF0000) >> 16;
  $G = ($Color & 0x00FF00) >>  8;
  $B = ($Color & 0x0000FF);
  #-----------------------------------------------------------------------------
  return Array('R'=>$R,'G'=>$G,'B'=>$B);
}
#-------------------------------------------------------------------------------
function Color_RGB_Implode($R,$G,$B){
  /****************************************************************************/
  $__args_types = Array('integer');
  #-----------------------------------------------------------------------------
  $__args__ = Func_Get_Args(); Eval(FUNCTION_INIT);
  /****************************************************************************/
  $R = SPrintF('%02X',$R);
  $G = SPrintF('%02X',$G);
  $B = SPrintF('%02X',$B);
  #-----------------------------------------------------------------------------
  return SPrintF('%s%s%s',$R,$G,$B);
}
#-------------------------------------------------------------------------------
?>