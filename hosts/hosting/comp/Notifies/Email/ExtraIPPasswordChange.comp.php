<?php

#-------------------------------------------------------------------------------
/** @author Великодный В.В. (Joonte Ltd.) */
/******************************************************************************/
/******************************************************************************/
$__args_list = Array('Replace');
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
$ExtraIPOrder = &$Replace['ExtraIPOrder'];
#-------------------------------------------------------------------------------
$Number = Comp_Load('Formats/Order/Number',$ExtraIPOrder['OrderID']);
if(Is_Error($Number))
  return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
$ExtraIPOrder['Number'] = $Number;
#-------------------------------------------------------------------------------
$Server = DB_Select('ExtraIPs',Array('Address','Url','Ns1Name','Ns2Name'),Array('UNIQ','ID'=>$ExtraIPOrder['ServerID']));
if(!Is_Array($Server))
  return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
$ExtraIPOrder['Server'] = $Server;
#-------------------------------------------------------------------------------
$CurrentDate = Comp_Load('Formats/Date/Standard',Time());
if(Is_Error($CurrentDate))
  return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
$Replace['CurrentDate'] = $CurrentDate;
#-------------------------------------------------------------------------------
$Message = <<<EOT
Здравствуйте, %User.Name%!

Уведомляем Вас о том, что %CurrentDate% пароль на Ваш заказ виртуального выделенного сервера (ExtraIP) №%ExtraIPOrder.Number% был успешно изменен.

Ваши новые данные для доступа к аккаунту на сервере:
  * Адрес панели управления: %ExtraIPOrder.Server.Url%
  * Логин в панель управления: %ExtraIPOrder.Login%
  * Пароль панели управления: %ExtraIPOrder.Password%

Данные для доступа на сервер по SSH:
  * IP адрес сервера: %ExtraIPOrder.Login%
  * Имя пользователя: root
  * Пароль: %ExtraIPOrder.Password%
 
При заказе сервера с панелью управления ISPmanager Lite, Вы можете войти в нее используя следующие данные:
  * Адрес панели ISPmanager: https://%ExtraIPOrder.Login%/manager/ispmgr
  * Логин в панель ISPmanager: root
  * Пароль панели ISPmanger: %ExtraIPOrder.Password%

Сервера имён:
  * Первичный сервер имен: %ExtraIPOrder.Server.Ns1Name%
  * Вторичный сервер имен: %ExtraIPOrder.Server.Ns2Name%

Сохраните эти данные в надежном месте, они потребуются для дальнейшей работы.

%From.Sign%
EOT;
#-------------------------------------------------------------------------------
$Replace = Array_ToLine($Replace,'%');
#-------------------------------------------------------------------------------
foreach(Array_Keys($Replace) as $Key)
  $Message = Str_Replace($Key,$Replace[$Key],$Message);
#-------------------------------------------------------------------------------
return Array('Theme'=>'Пароль для заказа виртуального сервера успешно изменен','Message'=>$Message);
#-------------------------------------------------------------------------------

?>
