<?php

#-------------------------------------------------------------------------------
/** @author Alex Keda, for www.host-food.ru */
/******************************************************************************/
/******************************************************************************/
$__args_list = Array('IsSearch');
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
$Filters = Array('Заказы на домены');
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
$Filter = Array('Name'=>'Любые','UsersIDs'=>Array());
#-------------------------------------------------------------------------------
if($IsSearch){
  #-----------------------------------------------------------------------------
  $DomainOrders = DB_Select('DomainOrdersOwners','UserID');
  #-----------------------------------------------------------------------------
  switch(ValueOf($DomainOrders)){
    case 'error':
      return ERROR | @Trigger_Error(500);
    case 'exception':
      # No more...
    break;
    case 'array':
      #-------------------------------------------------------------------------
      $UsersIDs = Array();
      #-------------------------------------------------------------------------
      foreach($DomainOrders as $HostingOrder)
        $UsersIDs[] = $HostingOrder['UserID'];
      #-------------------------------------------------------------------------
      Array_Unique($UsersIDs);
      #-------------------------------------------------------------------------
      $Filter['UsersIDs'] = $UsersIDs;
    break;
    default:
      return ERROR | @Trigger_Error(101);
  }
}
#-------------------------------------------------------------------------------
$Filters['AllDomainOrders'] = $Filter;

#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
$Filter = Array('Name'=>'Активные','UsersIDs'=>Array());
#-------------------------------------------------------------------------------
if($IsSearch){
  #-----------------------------------------------------------------------------
  $DomainOrders = DB_Select('DomainOrdersOwners','UserID',Array('Where'=>"`StatusID` = 'Active'"));
  #-----------------------------------------------------------------------------
  switch(ValueOf($DomainOrders)){
    case 'error':
      return ERROR | @Trigger_Error(500);
    case 'exception':
      # No more...
    break;
    case 'array':
      #-------------------------------------------------------------------------
      $UsersIDs = Array();
      #-------------------------------------------------------------------------
      foreach($DomainOrders as $HostingOrder)
        $UsersIDs[] = $HostingOrder['UserID'];
      #-------------------------------------------------------------------------
      Array_Unique($UsersIDs);
      #-------------------------------------------------------------------------
      $Filter['UsersIDs'] = $UsersIDs;
    break;
    default:
      return ERROR | @Trigger_Error(101);
  }
}
#-------------------------------------------------------------------------------
$Filters['ActiveDomainOrders'] = $Filter;

#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
$Filter = Array('Name'=>'Заблокированные','UsersIDs'=>Array());
#-------------------------------------------------------------------------------
if($IsSearch){
  #-----------------------------------------------------------------------------
  $DomainOrders = DB_Select('DomainOrdersOwners','UserID',Array('Where'=>"`StatusID` = 'Suspended'"));
  #-----------------------------------------------------------------------------
  switch(ValueOf($DomainOrders)){
    case 'error':
      return ERROR | @Trigger_Error(500);
    case 'exception':
      # No more...
    break;
    case 'array':
      #-------------------------------------------------------------------------
      $UsersIDs = Array();
      #-------------------------------------------------------------------------
      foreach($DomainOrders as $HostingOrder)
        $UsersIDs[] = $HostingOrder['UserID'];
      #-------------------------------------------------------------------------
      Array_Unique($UsersIDs);
      #-------------------------------------------------------------------------
      $Filter['UsersIDs'] = $UsersIDs;
    break;
    default:
      return ERROR | @Trigger_Error(101);
  }
}
#-------------------------------------------------------------------------------
$Filters['SuspendedDomainOrders'] = $Filter;

#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
$Filter = Array('Name'=>'Удалённые','UsersIDs'=>Array());
#-------------------------------------------------------------------------------
if($IsSearch){
  #-----------------------------------------------------------------------------
  $DomainOrders = DB_Select('DomainOrdersOwners','UserID',Array('Where'=>"`StatusID` = 'Deleted'"));
  #-----------------------------------------------------------------------------
  switch(ValueOf($DomainOrders)){
    case 'error':
      return ERROR | @Trigger_Error(500);
    case 'exception':
      # No more...
    break;
    case 'array':
      #-------------------------------------------------------------------------
      $UsersIDs = Array();
      #-------------------------------------------------------------------------
      foreach($DomainOrders as $HostingOrder)
        $UsersIDs[] = $HostingOrder['UserID'];
      #-------------------------------------------------------------------------
      Array_Unique($UsersIDs);
      #-------------------------------------------------------------------------
      $Filter['UsersIDs'] = $UsersIDs;
    break;
    default:
      return ERROR | @Trigger_Error(101);
  }
}
#-------------------------------------------------------------------------------
$Filters['DeletedDomainOrders'] = $Filter;

#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
$Filter = Array('Name'=>'Ожидающие оплату','UsersIDs'=>Array());
#-------------------------------------------------------------------------------
if($IsSearch){
  #-----------------------------------------------------------------------------
  $DomainOrders = DB_Select('DomainOrdersOwners','UserID',Array('Where'=>"`StatusID` = 'Waiting'"));
  #-----------------------------------------------------------------------------
  switch(ValueOf($DomainOrders)){
    case 'error':
      return ERROR | @Trigger_Error(500);
    case 'exception':
      # No more...
    break;
    case 'array':
      #-------------------------------------------------------------------------
      $UsersIDs = Array();
      #-------------------------------------------------------------------------
      foreach($DomainOrders as $HostingOrder)
        $UsersIDs[] = $HostingOrder['UserID'];
      #-------------------------------------------------------------------------
      Array_Unique($UsersIDs);
      #-------------------------------------------------------------------------
      $Filter['UsersIDs'] = $UsersIDs;
    break;
    default:
      return ERROR | @Trigger_Error(101);
  }
}
#-------------------------------------------------------------------------------
$Filters['WaitingDomainOrders'] = $Filter;

#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
$Filter = Array('Name'=>'На переносе','UsersIDs'=>Array());
#-------------------------------------------------------------------------------
if($IsSearch){
  #-----------------------------------------------------------------------------
  $DomainOrders = DB_Select('DomainOrdersOwners','UserID',Array('Where'=>"`StatusID` = 'OnTransfer'"));
  #-----------------------------------------------------------------------------
  switch(ValueOf($DomainOrders)){
    case 'error':
      return ERROR | @Trigger_Error(500);
    case 'exception':
      # No more...
    break;
    case 'array':
      #-------------------------------------------------------------------------
      $UsersIDs = Array();
      #-------------------------------------------------------------------------
      foreach($DomainOrders as $HostingOrder)
        $UsersIDs[] = $HostingOrder['UserID'];
      #-------------------------------------------------------------------------
      Array_Unique($UsersIDs);
      #-------------------------------------------------------------------------
      $Filter['UsersIDs'] = $UsersIDs;
    break;
    default:
      return ERROR | @Trigger_Error(101);
  }
}
#-------------------------------------------------------------------------------
$Filters['OnTransferDomainOrders'] = $Filter;


#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
return $Filters;
#-------------------------------------------------------------------------------


?>
