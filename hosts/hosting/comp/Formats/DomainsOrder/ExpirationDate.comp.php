<?php

#-------------------------------------------------------------------------------
/** @author Великодный В.В. (Joonte Ltd.) */
/******************************************************************************/
/******************************************************************************/
$__args_list = Array('ExpirationDate','YearsRemainded');
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
if(!($ExpirationDate || $YearsRemainded))
  return '-';
#-------------------------------------------------------------------------------
$ExpirationDate = Max($ExpirationDate,Time());
#-------------------------------------------------------------------------------
if($YearsRemainded){
  #-----------------------------------------------------------------------------
  $Date = Array();
  #-----------------------------------------------------------------------------
  foreach(Array('H','i','s','m','d','Y') as $Element)
    $Date[$Element] = Date($Element,$ExpirationDate);
  #---------------------------------------------------------------------------
  $Date['Y'] += $YearsRemainded;
  #---------------------------------------------------------------------------
  $ExpirationDate = MkTime($Date['H'],$Date['i'],$Date['s'],$Date['m'],$Date['d'],$Date['Y']);
}
#-------------------------------------------------------------------------------
return new Tag('DIV',Array('style'=>SPrintF('color:#%s;text-decoration:underline;',$ExpirationDate - Time() < 2592000?'FF0000':'1E2E07')),new Tag('SPAN',Date('d.m.y',$ExpirationDate)),new Tag('SPAN',SPrintF('| %u дн.',Ceil(($ExpirationDate-Time())/86400))));
#-------------------------------------------------------------------------------

?>
