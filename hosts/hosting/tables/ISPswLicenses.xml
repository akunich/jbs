<?xml version="1.0" encoding="utf-8"?>
<!-- @author Бреславский А.В. (Joonte Ltd.) -->
<XML>
<!-- *********************************************************************** -->
<Appearance>
 <Row>
  <Comp>Colors/ISPswLicenses</Comp>
  <Args>
   <ListElement>%StatusID%</ListElement>
  </Args>
 </Row>
</Appearance>
<!-- *********************************************************************** -->
<Source>
 <TableID>ISPswLicenses</TableID>
 <ColumnsIDs>
  <ListElement>ID</ListElement>
  <ListElement>ISPtype</ListElement>
  <ListElement>IP</ListElement>
  <ListElement>elid</ListElement>
  <ListElement>IsInternal</ListElement>
  <ListElement>IsUsed</ListElement>
  <ListElement>UpdateDate</ListElement>
  <ListElement>ISPname</ListElement>
  <ListElement>StatusID</ListElement>
  <ListElement>Flag</ListElement>
 </ColumnsIDs>
 <Conditions>
  <Message>Заказов на лицензии ISPsystem не обнаружено.</Message>
 </Conditions>
</Source>
<!-- *********************************************************************** -->
<Comps>
 <Before>
  <!-- ********************************************************************* -->
  <PatternOut>
   <Args>
    <Patterns>
      <ItIsInternal>
       <Name>Только внутренние</Name>
       <Where>`IsInternal` = 'yes'</Where>
      </ItIsInternal>
      <ItIsNotInternal>
       <Name>Только внешние</Name>
       <Where>`IsInternal` != 'yes'</Where>
      </ItIsNotInternal>
      <ItIsUsed>
       <Name>Только использующиеся</Name>
       <Where>`IsUsed` = 'yes'</Where>
      </ItIsUsed>
      <ItIsNotUsed>
       <Name>Только свободные</Name>
       <Where>`IsUsed` != 'yes'</Where>
      </ItIsNotUsed>
      <ItIsNotOrdered>
       <Name>Не заказанные</Name>
       <Where>(SELECT `ID` FROM `ISPswOrdersOwners` WHERE `ISPswOrdersOwners`.`LicenseID` = `ISPswLicenses`.`ID` LIMIT 1) IS NULL</Where>
      </ItIsNotOrdered>
      <ItIsOrdered>
       <Name>Заказанные</Name>
       <Where>(SELECT `ID` FROM `ISPswOrdersOwners` WHERE `ISPswOrdersOwners`.`LicenseID` = `ISPswLicenses`.`ID` LIMIT 1) IS NOT NULL</Where>
      </ItIsOrdered>
     </Patterns>
    </Args>
  </PatternOut>
  <!-- ********************************************************************* -->
  <Search>
   <Args>
    <ColumnsIDs>
     <ListElement>ISPtype</ListElement>
     <ListElement>IP</ListElement>
     <ListElement>elid</ListElement>
    </ColumnsIDs>
   </Args>
  </Search>
  <!-- ********************************************************************* -->
  <ISPswSearch>
   <Comp>ISPswLicenses/Search</Comp>
   <Args type="array" />
   <NoBlock />
  </ISPswSearch>
 </Before>
 <!-- ********************************************************************** -->
 <After>
  <Delete>
   <Args>
    <Comment>Выбранные заказы</Comment>
    <Send>
     <TableID>ISPswLicenses</TableID>
    </Send>
   </Args>
  </Delete>
  <!-- ********************************************************************* -->
 </After>
</Comps>
<!-- *********************************************************************** -->
<Query>
 <SortOn>elid</SortOn>
</Query>
<!-- *********************************************************************** -->
<Columns>
 <SelectID>
  <Args>
   <TableID>ISPswLicenses</TableID>
  </Args>
 </SelectID>
 <!-- ********************************************************************** -->
 <Edit>
  <IsSorted>0</IsSorted>
  <Comp>Buttons/Window</Comp>
  <Args>
   <ListElement>/Administrator/ISPswLicenseEdit</ListElement>
   <ListElement>
    <ISPswLicenseID>%ID%</ISPswLicenseID>
   </ListElement>
   <ListElement>Редактировать лицензию ISPsystem</ListElement>
   <ListElement>Edit.gif</ListElement>
  </Args>
  <Attribs>
   <class>TableSuperStandard</class>
   <style>width:22px;</style>
  </Attribs>
 </Edit>
 <!-- ********************************************************************** -->
 <ExtendedMenu>
  <IsSorted>0</IsSorted>
  <Comp>Menus/List</Comp>
  <Args>
   <ListElement>Administrator/ListMenu/ISPswOrder.xml</ListElement>
   <Replace>%ID%</Replace>
  </Args>
 </ExtendedMenu>
 <!-- ********************************************************************** -->
 <elid>
  <Head>elid</Head>
  <Prompt>Уникальный идентификатор лицензии, по биллингу ISPsystem</Prompt>
 </elid>
 <!-- ********************************************************************** -->
 <IP>
  <Head>IP</Head>
  <Prompt>IP-адрес, к котрому прицеплена лицензия</Prompt>
 </IP>
 <!-- ********************************************************************** -->
 <ISPname>
  <Head>Имя лицензии</Head>
  <Comp>Formats/String</Comp>
  <Args>
   <ListElement>%ISPname%</ListElement>
   <Length>15</Length>
  </Args>
  <Alias>ISPname</Alias>
 </ISPname>
 <!-- ********************************************************************** -->
 <Status>
  <Args>
   <ModeID>ISPswLicenses</ModeID>
  </Args>
 </Status>
 <!-- ********************************************************************** -->
 <Flag>
  <Head>Флаг</Head>
  <Prompt>Флаг установленный на лицензию</Prompt>
 </Flag>
 <!-- ********************************************************************** -->
 <IsInternal>
  <Head>Внутр.</Head>
  <Prompt>Внутренняя лицензия</Prompt>
  <Comp>Formats/Logic</Comp>
  <Args>
   <ListElement>%IsInternal%</ListElement>
  </Args>
 </IsInternal>
 <!-- ********************************************************************** -->
 <IsUsed>
  <Head>Исп.</Head>
  <Prompt>Лицензия используется в заказах</Prompt>
  <Comp>Formats/Logic</Comp>
  <Args>
   <ListElement>%IsUsed%</ListElement>
  </Args>
 </IsUsed>
 <!-- ********************************************************************** -->
 <ISPtype>
  <Head>Тип</Head>
  <Prompt>Тип лицензии в нашем биллинге</Prompt>
  <Comp>Formats/ISPswOrder/SoftWareList</Comp>
  <Args>
   <ListElement>1</ListElement>
   <ListElement>%ISPtype%</ListElement>
  </Args>
 </ISPtype>
</Columns>
<Sequence>
 <ListElement>SelectID</ListElement>
 <ListElement>Edit</ListElement>
 <ListElement>elid</ListElement>
 <ListElement>IP</ListElement>
 <ListElement>ISPtype</ListElement>
 <ListElement>ISPname</ListElement>
 <ListElement>IsInternal</ListElement>
 <ListElement>IsUsed</ListElement>
 <ListElement>Status</ListElement>
 <ListElement>Flag</ListElement>
</Sequence>
<!-- *********************************************************************** -->
</XML>
