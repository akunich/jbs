<?php

#-------------------------------------------------------------------------------
/** @author Великодный В.В. (Joonte Ltd.) */
/******************************************************************************/
/******************************************************************************/
$__args_list = Array('TableID','RowID','UserNotice','IsDisabled','NewWindow');
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
$Attribs = Array(
		'class'		=> 'Button',
		'alt'		=> 'Заметка',
		'src'		=> SPrintF('SRC:{Images/Icons/%s}',$UserNotice?'Notice3.gif':'Notice1.gif'),
/*		'width'		=> 16,
		'height'	=> 16*/
		);
#-------------------------------------------------------------------------------
if($NewWindow)
	$NewWindow = SPrintF(",NewWindow: '%s'",$NewWindow);
#-------------------------------------------------------------------------------
if(!$IsDisabled || $GLOBALS['__USER']['IsAdmin'])
	$Attribs['onclick']	= SPrintF("ShowWindow('/NoticeEdit',{TableID:'%s',RowID:%u%s});",$TableID,$RowID,($NewWindow)?$NewWindow:'');
#-------------------------------------------------------------------------------
$Img = new Tag('IMG',$Attribs);
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
if(!$UserNotice)
	$UserNotice = 'Добавить заметку';
#-------------------------------------------------------------------------------
$LinkID = UniqID('UserNotice');
#-------------------------------------------------------------------------------
$Links = &Links();
#-------------------------------------------------------------------------------
$Links[$LinkID] = &$Img;
#-------------------------------------------------------------------------------
$Comp = Comp_Load('Form/Prompt',$LinkID,$UserNotice);
if(Is_Error($Comp))
	return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
UnSet($Links[$LinkID]);
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
return $Img;
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------

?>
