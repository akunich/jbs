<?php


#-------------------------------------------------------------------------------
/** @author Великодный В.В. (Joonte Ltd.) */
/******************************************************************************/
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
$Args = Args();
#-------------------------------------------------------------------------------
$UIN = (integer) @$Args['UIN'];
#-------------------------------------------------------------------------------
if(Is_Error(System_Load('classes/IcqClient.class')))
  return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
$IsOnLine = IcqClient::IsOnLine($UIN);
#-------------------------------------------------------------------------------
switch(ValueOf($IsOnLine)){
  case 'error':
    $Icon = 'Error';
  break;
  case 'true':
    $Icon = 'On';
  break;
  case 'false':
    $Icon = 'Off';
  break;
  default:
    return ERROR | @Trigger_Error(101);
}
#-------------------------------------------------------------------------------
$Element = Styles_Element(SPrintF('Images/Icons/ICQ/%s.gif',$Icon));
if(Is_Error($Element))
  return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
$Icon = IO_Read($Element);
if(Is_Error($Icon))
  return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
Header('Content-Type: image/gif');
#-------------------------------------------------------------------------------
return $Icon;
#-------------------------------------------------------------------------------

?>
