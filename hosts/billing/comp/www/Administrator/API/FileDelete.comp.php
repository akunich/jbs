<?php

#-------------------------------------------------------------------------------
/** @author Alex Keda, for www.host-food.ru */
/******************************************************************************/
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
$Args = Args();
#-------------------------------------------------------------------------------
$ID	= (integer) @$Args['ID'];
$Table	=  (string) @$Args['Table'];

if(Is_Error(System_Load('modules/Authorisation.mod','libs/Upload.php')))
	return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
if(!$Table)
	return new gException('MESSAGE_TABLE_IS_EMPTY','Не указана связанная таблица');
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
if(!$Table)
	return new gException('MESSAGE_ID_IS_EMPTY','Не указана строка таблицы');
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
if(!DeleteUploadedFile($Table, $ID))
	return new gException('CANNOT_DELETE_FILE','Не удалось удалить файл');
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
return Array('Status'=>'Ok');
#-------------------------------------------------------------------------------

?>
