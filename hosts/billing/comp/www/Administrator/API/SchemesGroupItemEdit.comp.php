<?php

#-------------------------------------------------------------------------------
/** @author Alex Keda, for www.host-food.ru */
/******************************************************************************/
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
if(Is_Error(System_Load('modules/Authorisation.mod')))
  return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
$Args = Args();
#-------------------------------------------------------------------------------
$SchemesGroupItemID	= (integer) @$Args['SchemesGroupItemID'];
$SchemesGroupID		= (integer) @$Args['SchemesGroupID'];
$ServiceID		= (integer) @$Args['ServiceID'];
$SchemeID		= (integer) @$Args['SchemeID'];
#-------------------------------------------------------------------------------
$ISchemesGroup = Array(
	#-----------------------------------------------------------------------------
	'ServiceID'	=> $ServiceID,
	'SchemeID'	=> $SchemeID,
	
);
#-------------------------------------------------------------------------------
if(!$ServiceID)
	return new gException('SERVICE_NOT_SELECTED','Выберите сервис');
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
# проверяем, что тип учёта тот же самый, что и у уже добавленных услу


#-------------------------------------------------------------------------------
if($SchemesGroupItemID){
  #-----------------------------------------------------------------------------
  $IsUpdate = DB_Update('SchemesGroupsItems',$ISchemesGroup,Array('ID'=>$SchemesGroupItemID));
  if(Is_Error($IsUpdate))
    return ERROR | @Trigger_Error(500);
  #-----------------------------------------------------------------------------
}else{
  #-----------------------------------------------------------------------------
  $ISchemesGroup['SchemesGroupID'] = $SchemesGroupID;
  #-----------------------------------------------------------------------------
  $SchemesGroupID = DB_Insert('SchemesGroupsItems',$ISchemesGroup);
  if(Is_Error($SchemesGroupID))
    return ERROR | @Trigger_Error(500);
  #-----------------------------------------------------------------------------
  $Answer['SchemesGroupID'] = $SchemesGroupID;
}
#-------------------------------------------------------------------------------
return Array('Status'=>'Ok');
#-------------------------------------------------------------------------------

?>
