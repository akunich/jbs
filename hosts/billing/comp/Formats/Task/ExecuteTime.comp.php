<?php

#-------------------------------------------------------------------------------
/** @author Alex Keda, for www.host-food.ru */
/******************************************************************************/
/******************************************************************************/
$__args_list = Array('ExecuteTime','DefaultTime','ExecutePeriod');
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
if(IsSet($ExecutePeriod) && $ExecutePeriod){
	#-------------------------------------------------------------------------------
	# работаем с периодом
	$Time = Explode(":",$ExecutePeriod);
	#-------------------------------------------------------------------------------
	if(IsSet($Time[1])){
		#-------------------------------------------------------------------------------
		if((integer)$Time[0] >= 0 && (integer)$Time[0] <= 23 && (integer)$Time[1] >= 0 && (integer)$Time[1] <= 59){
			#-------------------------------------------------------------------------------
			if((integer)$Time[0] > 0)
				return (integer)$Time[0] * 3600 + (integer)$Time[1] * 60;
			#-------------------------------------------------------------------------------
			return (integer)$Time[1] * 60;
			#-------------------------------------------------------------------------------
		}else{
			#-------------------------------------------------------------------------------
			return $DefaultTime;
			#-------------------------------------------------------------------------------
		}
		#-------------------------------------------------------------------------------
	}else{
		#-------------------------------------------------------------------------------
		return $DefaultTime;
		#-------------------------------------------------------------------------------
	}
	#-------------------------------------------------------------------------------
}else{
	#-------------------------------------------------------------------------------
	# работаем с абсолютным временем
	$Time = Explode(":",$ExecuteTime);
	#-------------------------------------------------------------------------------
	if(IsSet($Time[1])){
		#-------------------------------------------------------------------------------
		if((integer)$Time[0] >= 0 && (integer)$Time[0] <= 23 && (integer)$Time[1] >= 0 && (integer)$Time[1] <= 59){
			#-------------------------------------------------------------------------------
			return MkTime((integer)$Time[0],(integer)$Time[1],0,Date('n'),Date('j')+1,Date('Y'));
			#-------------------------------------------------------------------------------
		}else{
			#-------------------------------------------------------------------------------
			return $DefaultTime;
			#-------------------------------------------------------------------------------
		}
		#-------------------------------------------------------------------------------
	}else{
		#-------------------------------------------------------------------------------
		return $DefaultTime;
		#-------------------------------------------------------------------------------
	}
	#-------------------------------------------------------------------------------
}
#-------------------------------------------------------------------------------

?>
