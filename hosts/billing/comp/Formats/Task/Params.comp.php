<?php

#-------------------------------------------------------------------------------
/** @author Alex Keda, for www.host-food.ru */
/******************************************************************************/
/******************************************************************************/
$__args_list = Array('Params','Type');
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
#-------------------------------------------------------------------------------
$jParams = Comp_Load('Formats/Explode/JSON',$Params);
if(Is_Error($jParams))
	return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
#Debug('[comp/Formats/Task/Params]: ' . print_r($jParams,true));
#-------------------------------------------------------------------------------
if($Type == 'Theme'){
	#-------------------------------------------------------------------------------
	$Out = Comp_Load('Formats/String',$jParams['Theme'],20);
	if(Is_Error($Out))
		return ERROR | @Trigger_Error(500);
	#-------------------------------------------------------------------------------
	return $Out;
	#-------------------------------------------------------------------------------
}elseif($Type == 'Message'){
	#-------------------------------------------------------------------------------
	$Out = Comp_Load('Formats/String',$jParams['Message'],20);
	if(Is_Error($Out))
		return ERROR | @Trigger_Error(500);
	#-------------------------------------------------------------------------------
	return $Out;
	#-------------------------------------------------------------------------------
}elseif($Type == 'SendToIDs'){
	#-------------------------------------------------------------------------------
	$SendedIDs = (StrLen($jParams['SendedIDs']) > 0)?SPrintF(' %s ',(SubStr_Count($jParams['SendedIDs'],',') + 1)):'0';
	$SendToIDs = (StrLen($jParams['SendToIDs']) > 0)?SPrintF(' %s ',(SubStr_Count($jParams['SendToIDs'],',') + 1)):'0';
	#-------------------------------------------------------------------------------
	return SPrintF(' %s ',($SendedIDs + $SendToIDs));
	#-------------------------------------------------------------------------------
}elseif($Type == 'SendedIDs'){
	#-------------------------------------------------------------------------------
	if(IsSet($jParams['SendedIDs']) && StrLen($jParams['SendedIDs']) > 0){
		#-------------------------------------------------------------------------------
		return SPrintF(' %s ',(SubStr_Count($jParams['SendedIDs'],',') + 1));
		#-------------------------------------------------------------------------------
	}else{
		#-------------------------------------------------------------------------------
		return ' 0 ';
		#-------------------------------------------------------------------------------
	}
	#-------------------------------------------------------------------------------
}
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
return $jParams;
#-------------------------------------------------------------------------------

?>
