<?php

#-------------------------------------------------------------------------------
/** @author Великодный В.В. (Joonte Ltd.) */
/******************************************************************************/
/******************************************************************************/
$__args_list = Array('SchemesGroupID','Length');
/******************************************************************************/
Eval(COMP_INIT);
/******************************************************************************/
/******************************************************************************/
$Result = Array();
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
$SchemesGroupsItems = DB_Select('SchemesGroupsItems','*',Array('Where'=>SPrintF('`SchemesGroupID` = %u',$SchemesGroupID)));
#-------------------------------------------------------------------------------
switch(ValueOf($SchemesGroupsItems)){
case 'error':
	return ERROR | @Trigger_Error(500);
case 'exception':
	return 'Для группы не задан ни один сервис';
case 'array':
	break;
default:
	return ERROR | @Trigger_Error(101);
}
#---------------------------------------------------------------------------
foreach($SchemesGroupsItems as $SchemesGroupsItem){
	#---------------------------------------------------------------------------
	$Comp = Comp_Load('www/Administrator/API/SchemesGroupItemInfo',$SchemesGroupsItem['ServiceID'],$SchemesGroupsItem['SchemeID'],30,0);
	if(Is_Error($Comp))
		return ERROR | @Trigger_Error(500);
	#---------------------------------------------------------------------------
	$Result[] = $Comp;
	#---------------------------------------------------------------------------
}
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
$Result = Implode(', ',$Result);
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
if(!Is_Null($Length)){
	#-----------------------------------------------------------------------------
	$Result = Comp_Load('Formats/String',$Result,$Length);
	if(Is_Error($Result))
		return ERROR | @Trigger_Error(500);
}
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------
return $Result;
#-------------------------------------------------------------------------------

?>
