<?php
#-------------------------------------------------------------------------------
$Folder = $_SERVER['DOCUMENT_ROOT'];
#-------------------------------------------------------------------------------
$Link = SPrintF('%s/public',$Folder);
#-------------------------------------------------------------------------------
if(!File_Exists($Link)){
  #-----------------------------------------------------------------------------
  $Tmp = System_Element('tmp');
  if(Is_Error($Tmp))
    return ERROR | @Trigger_Error(500);
  #-----------------------------------------------------------------------------
  if(!SymLink(SPrintF('%s/public',$Tmp),$Link))
    return ERROR | @Trigger_Error(500);
}
#-------------------------------------------------------------------------------
$HtAccess = IO_Read(SPrintF('%s/.htaccess',$Folder));
if(Is_Error($HtAccess))
  return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
$HtAccess = Str_Replace('(styles|index.php)','(public|styles|index.php)',$HtAccess);
#-------------------------------------------------------------------------------
$IsWrite = IO_Write(SPrintF('%s/.htaccess',$Folder),$HtAccess,TRUE);
if(Is_Error($IsWrite))
  return ERROR | @Trigger_Error(500);
#-------------------------------------------------------------------------------
return TRUE;
#-------------------------------------------------------------------------------
?>