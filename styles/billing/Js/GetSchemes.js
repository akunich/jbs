//------------------------------------------------------------------------------
/** @author Alex Keda, for www.host-food.u */
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------
function GetSchemes($ServiceID,$FormID,$SchemeID){
	//------------------------------------------------------------------------------
	var $GetSchemesHTTP = new HTTP();
	//------------------------------------------------------------------------------
	$GetSchemesHTTP.Stack = [];
	//------------------------------------------------------------------------------
	var $Args = {ServiceID:$ServiceID};
	//------------------------------------------------------------------------------
	if(!$GetSchemesHTTP.Send('/Administrator/AutoComplite/SchemeID',$Args)){
		//------------------------------------------------------------------------------
		alert('Не удалось отправить запрос на сервер');
		//------------------------------------------------------------------------------
		return false;
		//------------------------------------------------------------------------------
	}else{
		//------------------------------------------------------------------------------
        	$GetSchemesHTTP.onAnswer = function($Answer){
			//------------------------------------------------------------------------------
			var $GetSchemesSelect = document.getElementById($FormID);
			//------------------------------------------------------------------------------
			var $Options = $GetSchemesSelect.options;
			//------------------------------------------------------------------------------
			while($Options.length != 0)
				$GetSchemesSelect.remove($Options.length - 1);
			//------------------------------------------------------------------------------
			var $GetSchemes = document.getElementById($FormID)
			//------------------------------------------------------------------------------
			// дефолтовая опция - все тарифы
			var $Adding = document.createElement('OPTION');
			//------------------------------------------------------------------------------
			$Adding.value = 0;
			//------------------------------------------------------------------------------
			$Adding.innerHTML = 'Любой тариф';
			//------------------------------------------------------------------------------
			$GetSchemesSelect.appendChild($Adding);
			//------------------------------------------------------------------------------
			$GetSchemesSelect.disabled = true;
			//------------------------------------------------------------------------------
			switch($Answer.Status){
			case 'Error':
				//------------------------------------------------------------------------------
				alert('Не удалось получить список тарифов');
				//------------------------------------------------------------------------------
				break;
				//------------------------------------------------------------------------------
			case 'Exception':
				//alert('Exception');
				break;
			case 'Ok':
				//------------------------------------------------------------------------------
				$GetSchemesSelect.disabled = false;
				//------------------------------------------------------------------------------
				for(var i in $Answer.Options){
					//------------------------------------------------------------------------------
					var $Option = $Answer.Options[i];
					//------------------------------------------------------------------------------
					var $Adding = document.createElement('OPTION');
					//------------------------------------------------------------------------------
					$Adding.value = $Option.Value;
					//------------------------------------------------------------------------------
					$Adding.innerHTML = $Option.Label;
					//------------------------------------------------------------------------------
					if($SchemeID == $Option.Value)
						$Adding.selected = true;
					//------------------------------------------------------------------------------
					$GetSchemesSelect.appendChild($Adding);
					//------------------------------------------------------------------------------
				}
				//------------------------------------------------------------------------------
				break;
				//------------------------------------------------------------------------------
			default:
				alert('Не известный ответ');
			}
			//------------------------------------------------------------------------------
			//$GetSchemesSelect.selectedIndex = $SchemeID;
			//------------------------------------------------------------------------------
		}
		//------------------------------------------------------------------------------
	}
	//------------------------------------------------------------------------------
}
//------------------------------------------------------------------------------
//------------------------------------------------------------------------------

